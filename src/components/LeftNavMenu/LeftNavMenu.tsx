import React, { useRef, useState } from 'react'
import classes from "./LeftNavMenu.module.scss";
import { Link } from 'react-router-dom';
import { useOnClickOutside } from '../../utils/hooks/useOnClickOutside';
import { CSSTransition } from 'react-transition-group';
import DropdownMenu from '../Footer/RightFooterPart/AditionalNav/AdditNavMenuPopUp/PopUpButtons/DropdownMenu/DropdownMenu';

interface cords {
    left: number
    top: number
}

const LeftNavMenu = () => {
    const isExtendedNavMenu = false
    const [cords, setCords] = useState<cords>({left: 5, top: 15})
    const [open,setOpen] = useState(false)
    const [open1,setOpen1] = useState(false)
  
    const ContextMenuRef1 = useRef<HTMLLIElement>(null)

    const closeMenu1 = () => {
        setOpen(false)      
    }
  
    const ContextMenuRef2 = useRef<HTMLLIElement>(null)

    const closeMenu2 = () => {
        setOpen1(false)
    }
  
    useOnClickOutside(ContextMenuRef1, closeMenu1)
  
  
  
    useOnClickOutside(ContextMenuRef2, closeMenu2)

    const styles = {
        top: '200px',
        left: '100px',
        right: 'unset',
        bottom: 'unset',
        borderRadius: 15,
        background: 'rgba(33, 33, 33, 0.7)',
        backdropFilter: 'blur(10px)',
        color: 'white',
    }

    return (
        <div className={isExtendedNavMenu ? classes.ExtendedLeftNavMenu : classes.LeftNavMenu} id='extMenu'>
            <div className={classes.Drag}><svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 24 24" fill="none"><g id="Interface / Drag_Horizontal"><g id="Vector"><path d="M18 14C17.4477 14 17 14.4477 17 15C17 15.5523 17.4477 16 18 16C18.5523 16 19 15.5523 19 15C19 14.4477 18.5523 14 18 14Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/><path d="M12 14C11.4477 14 11 14.4477 11 15C11 15.5523 11.4477 16 12 16C12.5523 16 13 15.5523 13 15C13 14.4477 12.5523 14 12 14Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/><path d="M6 14C5.44772 14 5 14.4477 5 15C5 15.5523 5.44772 16 6 16C6.55228 16 7 15.5523 7 15C7 14.4477 6.55228 14 6 14Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/><path d="M18 8C17.4477 8 17 8.44772 17 9C17 9.55228 17.4477 10 18 10C18.5523 10 19 9.55228 19 9C19 8.44772 18.5523 8 18 8Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/><path d="M12 8C11.4477 8 11 8.44772 11 9C11 9.55228 11.4477 10 12 10C12.5523 10 13 9.55228 13 9C13 8.44772 12.5523 8 12 8Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/><path d="M6 8C5.44772 8 5 8.44772 5 9C5 9.55228 5.44772 10 6 10C6.55228 10 7 9.55228 7 9C7 8.44772 6.55228 8 6 8Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></g></g></svg></div>
            <div className={classes.MainNav}>
                <Link to="/feed" title="Главная">
                    <li className={classes.Item} onMouseDown={e => e.stopPropagation()}>
                        <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5652 1.06449C14.4548 1.11471 11.1533 4.37985 7.22837 8.32034C-0.531482 16.1109 -0.0703416 15.6026 0.0481877 16.2359C0.109927 16.5659 0.510064 16.9671 0.839297 17.0289C1.4702 17.1476 1.00365 17.5707 8.29427 10.2676L15 3.5504L21.7057 10.2676C28.9964 17.5707 28.5298 17.1476 29.1607 17.0289C29.4899 16.9671 29.8901 16.5659 29.9518 16.2359C30.0703 15.6026 30.5315 16.1109 22.7716 8.32027C18.5926 4.12451 15.5463 1.11672 15.4202 1.06181C15.1514 0.9446 14.8264 0.945606 14.5652 1.06449ZM3.85945 18.224C3.58908 18.3471 3.30908 18.689 3.25972 18.9568C3.23778 19.0756 3.23075 20.8474 3.24413 22.8942C3.27142 27.0779 3.25276 26.9042 3.79617 28.0237C4.31785 29.0984 5.17036 29.9431 6.26562 30.4704C7.38409 31.0088 6.78034 30.974 15 30.974C23.2669 30.974 22.6231 31.0135 23.7993 30.4345C25.1772 29.7563 26.1808 28.5271 26.6162 26.9844C26.7292 26.5841 26.7392 26.2329 26.7392 22.6812C26.7392 18.8798 26.7369 18.8107 26.6013 18.6287C26.3393 18.2768 26.1254 18.167 25.7024 18.167C25.2795 18.167 25.0657 18.2767 24.8035 18.6286C24.669 18.809 24.6648 18.9074 24.6322 22.5805C24.5998 26.227 24.5941 26.3595 24.4553 26.7275C24.1142 27.6304 23.4037 28.3427 22.5029 28.6845C22.1255 28.8277 22.0928 28.8284 15.2341 28.8485C10.3 28.863 8.23052 28.8472 7.94309 28.7927C7.48135 28.7052 6.87151 28.4149 6.49693 28.1043C6.1497 27.8164 5.72308 27.2002 5.54589 26.7307C5.40555 26.3587 5.40027 26.2364 5.36782 22.5805C5.33518 18.9074 5.33097 18.809 5.19645 18.6286C5.1206 18.5268 4.97986 18.3846 4.88374 18.3126C4.66233 18.1469 4.13022 18.1009 3.85945 18.224Z"></path></svg>
                        {isExtendedNavMenu && <span>Главная</span>}
                    </li>
                </Link>
                <Link to="/friends" title="Друзья" onMouseDown={e => e.stopPropagation()}>
                    <li className={classes.Item}>
                        <svg width="34" height="31" viewBox="0 0 34 31" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.13102 30.9746C0.506531 30.9746 0 30.4646 0 29.8386C0 26.8527 0.940204 24.011 2.72347 21.6194C3.58735 20.4693 4.61429 19.4635 5.77653 18.6405C6.74796 17.9476 7.80612 17.3849 8.91633 16.9734L8.97878 16.9488L8.92327 16.9101C7.89286 16.2278 6.99776 15.3099 6.33857 14.2548C5.48163 12.8761 5.02714 11.2864 5.02714 9.65808C5.02714 4.87144 8.90592 0.974609 13.6694 0.974609C18.4329 0.974609 22.3082 4.86793 22.3082 9.65456C22.3082 11.1458 21.9231 12.6194 21.1945 13.9172C20.5284 15.1059 19.5743 16.1329 18.4398 16.889L18.3843 16.9242L18.4467 16.9488C19.5361 17.3603 20.5769 17.9125 21.538 18.5948C22.7071 19.4248 23.7341 20.4306 24.5945 21.5807C26.3778 23.9687 27.3214 26.8105 27.3214 29.7999C27.3214 30.426 26.8149 30.9359 26.1904 30.9359C25.5659 30.9359 25.0594 30.426 25.0594 29.7999C25.0594 26.7507 23.8763 23.8773 21.7322 21.7108C19.6506 19.6112 16.8959 18.4189 13.9816 18.3556H13.9782L13.9122 18.3697C13.8255 18.3873 13.7388 18.3978 13.659 18.3978C13.6312 18.3978 13.6035 18.3978 13.5757 18.3943C10.5678 18.4013 7.73327 19.5936 5.59265 21.7495C3.44163 23.916 2.25857 26.7894 2.25857 29.8386C2.26204 30.4646 1.75551 30.9746 1.13102 30.9746ZM13.6694 3.24659C10.1514 3.24659 7.28918 6.1235 7.28918 9.65808C7.28918 13.1927 10.1514 16.0696 13.6694 16.0696C17.1873 16.0696 20.0496 13.1927 20.0496 9.65808C20.0531 6.1235 17.1873 3.24659 13.6694 3.24659ZM32.869 28.4072C32.2445 28.4072 31.738 27.8972 31.738 27.2712C31.738 22.0203 27.7516 17.7472 22.8529 17.7472C22.2284 17.7472 21.7218 17.2372 21.7218 16.6112C21.7218 15.9816 22.2284 15.4717 22.8529 15.4717C25.5416 15.4717 27.7308 13.1118 27.7308 10.2102C27.7308 7.31224 25.5416 4.95234 22.8529 4.95234C22.2284 4.95234 21.7218 4.44237 21.7218 3.81634C21.7218 3.19032 22.2284 2.68035 22.8529 2.68035C26.7906 2.68035 29.9929 6.05667 29.9929 10.2102C29.9929 11.5397 29.6563 12.848 29.0214 13.9945C28.5253 14.8914 27.8453 15.6862 27.0543 16.2947L27.0092 16.3298L27.0612 16.3544C28.9694 17.1809 30.6278 18.5561 31.8559 20.3322C33.2541 22.358 33.9931 24.7566 34 27.2747C34 27.8972 33.4935 28.4072 32.869 28.4072Z"></path></svg>
                        {isExtendedNavMenu && <span>Друзья</span>}
                    </li>
                </Link>
                <Link to="/searcher" title="Searcher" onMouseDown={e => e.stopPropagation()}>
                    <li className={classes.IndividualButton}>
                        <div className={classes.IndButton}></div>
                        {isExtendedNavMenu && <span>Searcher</span>}
                    </li>
                </Link>
                <Link to="/music/home" title="Музыка" onMouseDown={e => e.stopPropagation()}>
                    <li className={classes.Item}>
                        <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.659 3.40564C14.017 4.73953 9.39365 5.8324 9.385 5.83421C9.37635 5.83603 9.36922 9.42733 9.36922 13.8149V21.7923L8.97467 21.5221C8.51806 21.2094 7.92612 20.9235 7.36744 20.7459C6.37273 20.4295 4.97408 20.4236 3.94024 20.7314C2.07058 21.288 0.65564 22.666 0.140265 24.4322C0.0177346 24.852 -0.00429696 25.0651 0.000626999 25.7813C0.00580347 26.5249 0.0277087 26.6967 0.174796 27.1478C0.783789 29.015 2.22733 30.3292 4.22431 30.8345C4.91815 31.0101 6.22186 31.0227 6.90724 30.8605C8.63169 30.4523 10.0584 29.3655 10.7617 27.9242C10.8621 27.7184 11.0084 27.3566 11.0868 27.1202L11.2293 26.6905L11.2479 19.8288C11.2582 16.0548 11.2871 12.9485 11.3122 12.9259C11.3464 12.895 28.0027 8.94639 28.099 8.94639C28.1095 8.94639 28.1181 10.8871 28.1181 13.2591V17.5719L27.7965 17.3356C27.326 16.9901 26.7735 16.7198 26.1264 16.5187C23.1535 15.5948 19.9889 17.0903 18.97 19.9006C18.6252 20.8516 18.6252 22.1467 18.9699 23.0975C19.6407 24.9479 21.3067 26.3136 23.3204 26.6639C23.8732 26.7601 24.9564 26.7496 25.4994 26.6429C27.5883 26.2324 29.241 24.7756 29.8374 22.8191L29.9804 22.3498L29.9972 11.6593C30.0064 5.77954 29.9922 0.971443 29.9656 0.974611C29.939 0.977778 25.3011 2.07176 19.659 3.40564ZM28.1181 5.18475V7.11291L27.3764 7.29287C25.565 7.73228 11.3923 11.0581 11.3312 11.0581C11.2838 11.0581 11.263 10.4706 11.263 9.13128V7.20447L15.0665 6.30911C17.1583 5.81662 20.9153 4.93029 23.4151 4.33943C25.915 3.7485 27.9959 3.26316 28.0392 3.26082C28.1008 3.25747 28.1181 3.67899 28.1181 5.18475ZM25.5299 18.1911C26.7255 18.5395 27.6717 19.4856 27.9935 20.6543C28.2999 21.768 27.9784 22.9689 27.1444 23.8252C26.6906 24.2913 26.201 24.5891 25.5421 24.8001C24.5013 25.1335 23.246 24.9897 22.3318 24.4323C20.3459 23.2215 20.0194 20.7034 21.6418 19.1096C22.6676 18.1019 24.0792 17.7684 25.5299 18.1911ZM6.4149 22.3258C6.59886 22.3609 6.98804 22.4956 7.27963 22.625C8.17882 23.0239 8.87373 23.7768 9.21853 24.7255C9.39466 25.21 9.38424 26.2597 9.19782 26.8103C8.63447 28.474 6.6801 29.5332 4.86575 29.1582C3.48856 28.8734 2.48508 28.0171 2.00847 26.7198C1.82502 26.2205 1.8413 25.2409 2.04262 24.6697C2.23036 24.137 2.69839 23.4712 3.13416 23.117C3.50989 22.8116 4.19982 22.4749 4.69777 22.3539C5.11725 22.252 5.95691 22.2382 6.4149 22.3258Z"></path></svg>
                        {isExtendedNavMenu && <span>Музыка</span>}
                    </li>
                </Link>
                <Link to="/messenger" title="Сообщения">
                    <li className={classes.Item} onMouseDown={e => e.stopPropagation()}>
                        <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.8061 1.00361C11.511 1.20152 9.58355 1.73661 7.7033 2.69797C4.27313 4.45171 1.78219 7.26579 0.642143 10.6753C-0.0687143 12.8011 -0.19212 15.1116 0.2856 17.3486C0.689322 19.2391 1.59699 21.1493 2.84848 22.7422L3.19757 23.1865L2.26871 27.0416C1.75784 29.1619 1.33909 30.931 1.33815 30.9731C1.33722 31.0151 3.00404 30.1822 5.04219 29.1223C7.09966 28.0523 8.78966 27.2087 8.84177 27.2257C8.89335 27.2425 9.21286 27.3561 9.55174 27.4782C15.408 29.5879 22.123 28.0723 26.3051 23.6969C28.2655 21.6458 29.4374 19.3143 29.8945 16.5553C30.0352 15.7064 30.0352 13.6815 29.8945 12.8326C29.4374 10.0737 28.2655 7.74217 26.3051 5.69105C23.7473 3.015 20.2272 1.36886 16.3294 1.02607C15.6751 0.968518 14.3499 0.956678 13.8061 1.00361ZM17.1509 2.96893C18.9251 3.25216 20.4568 3.76478 21.8747 4.55002C27.0133 7.39572 29.381 12.7746 27.7636 17.9284C26.508 21.929 22.8419 25.1378 18.3202 26.1936C17.0855 26.4819 16.364 26.56 14.9504 26.5588C12.6773 26.5568 11.2993 26.259 8.8606 25.2428C8.67142 25.1639 8.62975 25.1826 6.34537 26.3699C5.06784 27.034 4.01135 27.5657 3.99768 27.5514C3.98395 27.5371 4.23575 26.4324 4.5572 25.0964L5.14172 22.6673L4.7279 22.2049C2.17559 19.3531 1.19286 15.6171 2.07067 12.1034C3.25824 7.34995 7.61962 3.673 12.9259 2.95166C14.0016 2.80544 14.0223 2.80434 15.2438 2.82649C15.999 2.84016 16.6474 2.88862 17.1509 2.96893Z"></path></svg>
                        {isExtendedNavMenu && <span>Сообщения</span>}
                    </li>
                </Link>
            </div>
            <div className={classes.Buttons}>
                <li className={classes.Button} ref={ContextMenuRef1} onClick={() => setOpen1(!open1)}>
                    <div className={classes.icon}><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/></svg></div>
                    <CSSTransition
                        in={open1}
                        unmountOnExit 
                        timeout={500}
                        classNames="dropdownLeftMenu"
                    >
                        <DropdownMenu styles={styles}/>
                    </CSSTransition>
                </li>
            </div>
        </div>
    )
}

export default LeftNavMenu